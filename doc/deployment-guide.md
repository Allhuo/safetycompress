# ğŸš€ é¡¹ç›®éƒ¨ç½²æŒ‡å—

## ğŸ“‹ é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åç§°**: Safety PDF Compressor
- **GitHubä»“åº“**: https://github.com/Allhuo/safetycompress.git
- **é¡¹ç›®ç±»å‹**: React + TypeScript + Vite + WASM
- **ä¸»è¦åŠŸèƒ½**: PDFå‹ç¼©å·¥å…·ï¼ˆåŸºäºGhostscript WASMï¼‰

## ğŸ”§ æŠ€æœ¯æ ˆç‰ˆæœ¬

### æ ¸å¿ƒä¾èµ–
- **React**: ^18.3.1
- **TypeScript**: ~5.6.2
- **Vite**: ^6.0.1
- **Tailwind CSS**: ^3.4.17
- **Ghostscript WASM**: è‡ªå®šä¹‰æ„å»ºç‰ˆæœ¬

### å¼€å‘å·¥å…·
- **ESLint**: ^9.15.0
- **Prettier**: ^3.4.2
- **PostCSS**: ^8.5.1

## ğŸ“¦ éƒ¨ç½²æµç¨‹

### 1. æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Allhuo/safetycompress.git
cd safetycompress

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

### 2. GitHubæ¨é€æµç¨‹

```bash
# æ£€æŸ¥å½“å‰çŠ¶æ€
git status

# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .

# æäº¤æ›´æ”¹ï¼ˆä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯ï¼‰
git commit -m "feat: å®æ–½WASMåŠ è½½ä¼˜åŒ–å’ŒçœŸå®è¿›åº¦ç›‘å¬"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
```

### 3. ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

#### åˆ†æ”¯å‘½åè§„èŒƒ
- `main`: ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `develop`: å¼€å‘åˆ†æ”¯
- `feature/xxx`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/xxx`: ç´§æ€¥ä¿®å¤åˆ†æ”¯

#### æäº¤ä¿¡æ¯è§„èŒƒ
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bugä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼åŒ–
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾æ›´æ”¹

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### æ–‡ä»¶æ’é™¤åˆ—è¡¨
ä»¥ä¸‹æ–‡ä»¶/ç›®å½•**ä¸åº”**ä¸Šä¼ åˆ°GitHubï¼š

```
# æ•æ„Ÿé…ç½®æ–‡ä»¶
doc/deployment-credentials.md
doc/server-config.md
.env.local
.env.production

# æ„å»ºäº§ç‰©
dist/
build/
node_modules/

# å¼€å‘å·¥å…·
.vscode/settings.json
.idea/

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# æ—¥å¿—æ–‡ä»¶
*.log
npm-debug.log*
```

### Gité…ç½®æ£€æŸ¥

```bash
# æ£€æŸ¥å½“å‰Gité…ç½®
git config --list

# ç¡®ä¿ç”¨æˆ·ä¿¡æ¯æ­£ç¡®
git config user.name "Your Name"
git config user.email "your.email@example.com"
```

## ğŸ“Š æœ¬æ¬¡æ›´æ–°å†…å®¹ (v1.1.2)

### ğŸ› é‡å¤§Bugä¿®å¤

1. **WASMé‡å¤ä¸‹è½½é—®é¢˜**
   - ä¿®å¤WebWorkeré‡å¤åˆ›å»ºå¯¼è‡´çš„é‡å¤ä¸‹è½½
   - æ”¹è¿›å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œå¢åŠ workerPromiseç¼“å­˜
   - æ·»åŠ Workerå®ä¾‹é‡ç”¨æœºåˆ¶

2. **è¿›åº¦æ¡æ˜¾ç¤ºä¼˜åŒ–**
   - ä¿®å¤åªæ˜¾ç¤º50%â†’100%çš„é—®é¢˜
   - å®ç°åˆ†æ®µå¼è¿›åº¦æ˜¾ç¤ºï¼ˆ10%, 20%, 30%...95%, 100%ï¼‰
   - æ”¹è¿›æ— Content-Lengthæƒ…å†µä¸‹çš„è¿›åº¦ç›‘å¬

3. **Hookç³»ç»Ÿä¿®å¤**
   - ç§»é™¤useEffectçš„problematicä¾èµ–é¡¹
   - ä¿®å¤é‡å¤è§¦å‘é¢„åŠ è½½çš„é—®é¢˜
   - å¢å¼ºçŠ¶æ€æ£€æŸ¥é€»è¾‘ï¼Œé˜²æ­¢é‡å¤åˆå§‹åŒ–

4. **WebWorkerå¢å¼º**
   - æ·»åŠ çŠ¶æ€æŸ¥è¯¢å’Œæ•°æ®å¤ç”¨åŠŸèƒ½
   - æ”¯æŒclearæ“ä½œï¼Œæ”¹è¿›èµ„æºæ¸…ç†
   - ä¼˜åŒ–æ¶ˆæ¯å¤„ç†å’Œé”™è¯¯å¤„ç†æœºåˆ¶

### ğŸ“ˆ æ€§èƒ½æå‡

- **æ¶ˆé™¤é‡å¤ä¸‹è½½**: WASMæ–‡ä»¶ç°åœ¨åªä¼šä¸‹è½½ä¸€æ¬¡å¹¶å¤ç”¨
- **çœŸå®è¿›åº¦æ˜¾ç¤º**: å³ä½¿åœ¨æ— Content-Lengthçš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ˜¾ç¤ºå¹³æ»‘è¿›åº¦
- **æ›´å¿«çš„äºŒæ¬¡åŠ è½½**: åˆ©ç”¨WebWorkerç¼“å­˜ï¼Œé¿å…é‡æ–°ä¸‹è½½
- **å†…å­˜ä½¿ç”¨ä¼˜åŒ–**: æ›´å¥½çš„èµ„æºç®¡ç†å’Œæ¸…ç†æœºåˆ¶

### ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœæ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å›æ»šï¼š

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
git reset --hard <commit-hash>

# å¼ºåˆ¶æ¨é€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git push --force origin main
```

## ğŸ“ æ”¯æŒè”ç³»

- **å¼€å‘è€…**: Allhuo
- **é—®é¢˜åé¦ˆ**: GitHub Issues
- **æ›´æ–°æ—¥æœŸ**: 2024-07-01 16:56 